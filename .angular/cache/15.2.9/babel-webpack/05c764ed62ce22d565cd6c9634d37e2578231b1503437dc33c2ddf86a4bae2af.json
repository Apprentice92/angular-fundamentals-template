{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@fortawesome/angular-fontawesome\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@app/services/courses-store.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../button/button.component\";\nimport * as i7 from \"../modal/modal.component\";\nimport * as i8 from \"../../pipes/duration.pipe\";\nfunction CourseFormComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \" Title must be at least 2 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \" Description must be at least 2 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \" This field field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \" Duration must be positive \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵtext(1, \" Author must be at least 2 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_div_39_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"app-button\", 31);\n    i0.ɵɵlistener(\"click\", function CourseFormComponent_div_39_div_1_Template_app_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const i_r10 = restoredCtx.index;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.addAuthorToCourseAuthors(i_r10));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"app-button\", 32);\n    i0.ɵɵlistener(\"click\", function CourseFormComponent_div_39_div_1_Template_app_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const i_r10 = restoredCtx.index;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.deleteAuthor(i_r10));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const author_r9 = ctx.$implicit;\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", (tmp_0_0 = author_r9.get(\"name\")) == null ? null : tmp_0_0.value, \" \");\n  }\n}\nfunction CourseFormComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, CourseFormComponent_div_39_div_1_Template, 4, 1, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.authors.controls);\n  }\n}\nexport class CourseFormComponent {\n  constructor(fb, library, router, activatedRoute, coursesStoreService) {\n    this.fb = fb;\n    this.library = library;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.coursesStoreService = coursesStoreService;\n    this.courseId = null;\n    this.nextId = 1; // Initialize ID counter\n    this.showModal = false;\n    this.modalTitle = \"\";\n    this.modalMessage = \"\";\n    library.addIconPacks(fas);\n    this.courseForm = this.fb.group({\n      title: this.fb.control(\"\", [Validators.required, Validators.minLength(2)]),\n      description: this.fb.control(\"\", [Validators.required, Validators.minLength(2)]),\n      author: this.fb.control(\"\", [Validators.minLength(2), Validators.pattern(\"[a-zA-Z0-9]*\")]),\n      authors: this.fb.array([]),\n      courseAuthors: this.fb.array([]),\n      duration: this.fb.control(0, [Validators.required, Validators.min(1)])\n    });\n  }\n  ngOnInit() {\n    this.courseId = this.activatedRoute.snapshot.paramMap.get(\"id\");\n    if (this.courseId) {\n      this.coursesStoreService.getCourse(this.courseId);\n      this.coursesStoreService.selectedCourse$.subscribe(course => {\n        if (course) {\n          this.populateForm(course);\n        }\n      });\n    }\n  }\n  populateForm(course) {\n    this.courseForm.patchValue({\n      title: course.title,\n      description: course.description,\n      duration: course.duration\n    });\n    this.setAuthors(course.authors);\n  }\n  setAuthors(authors) {\n    if (authors) {\n      const authorFormGroups = authors.map(author => this.createAuthorFbGroup(author));\n      const authorFormArray = this.fb.array(authorFormGroups);\n      this.courseForm.setControl(\"courseAuthors\", authorFormArray);\n    }\n  }\n  onFormSubmit() {\n    if (this.courseForm.valid) {\n      if (this.courseId) {\n        this.coursesStoreService.editCourse(this.courseId, this.createCourseFromForm());\n      } else {\n        this.coursesStoreService.createCourse(this.createCourseFromForm());\n      }\n      this.courseForm.reset();\n      this.courseAuthors.clear();\n      this.router.navigate([\"/courses\"]);\n    } else {\n      this.updateModal(\"Invalid form\", \"Form is not valid\");\n      this.courseForm.markAllAsTouched();\n    }\n  }\n  createCourseFromForm() {\n    let courseFormValue = this.courseForm.value;\n    return {\n      title: courseFormValue[\"title\"],\n      description: courseFormValue[\"description\"],\n      duration: courseFormValue[\"duration\"],\n      authors: this.getAuthorsIds()\n    };\n  }\n  getAuthorsIds() {\n    let ids = [];\n    this.courseAuthors.value.map(author => ids.push(author.id));\n    return ids;\n  }\n  addAuthorToCourseAuthors(id) {\n    let author = this.authors.controls.at(id);\n    this.coursesStoreService.createAuthor(author?.get(\"name\")?.value).subscribe({\n      next: author => {\n        this.courseAuthors.push(this.createAuthorFbGroup(author));\n        this.deleteAuthor(id);\n      },\n      error: error => {\n        console.error(\"Failed to create author:\", error);\n      }\n    });\n  }\n  createAuthorFbGroup(author) {\n    return this.fb.group({\n      id: [author.id, Validators.required],\n      name: [author.name, Validators.required]\n    });\n  }\n  deleteAuthor(id) {\n    this.authors.removeAt(id);\n  }\n  deleteCourseAuthor(id) {\n    this.courseAuthors.removeAt(id);\n  }\n  createAuthor() {\n    const newAuthor = this.courseForm.get(\"author\");\n    if (newAuthor?.valid && newAuthor.value.length >= 2) {\n      const authorFormGroup = this.fb.group({\n        id: this.nextId++,\n        name: newAuthor.value\n      });\n      this.authors.push(authorFormGroup);\n      newAuthor.reset();\n    }\n  }\n  get courseAuthors() {\n    return this.courseForm.get(\"courseAuthors\");\n  }\n  get authors() {\n    return this.courseForm.get(\"authors\");\n  }\n  updateModal(modalTitle, modalMessage) {\n    this.modalMessage = modalTitle;\n    this.modalTitle = modalMessage;\n    this.showModal = true;\n  }\n  closeModal() {\n    this.showModal = false;\n  }\n}\nCourseFormComponent.ɵfac = function CourseFormComponent_Factory(t) {\n  return new (t || CourseFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.FaIconLibrary), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.CoursesStoreService));\n};\nCourseFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CourseFormComponent,\n  selectors: [[\"app-course-form\"]],\n  decls: 49,\n  vars: 17,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"app-plate\"], [1, \"course\"], [1, \"form__control\"], [\"type\", \"text\", \"id\", \"title\", \"name\", \"title\", \"placeholder\", \"Input text\", \"formControlName\", \"title\"], [\"id\", \"titleErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"placeholder\", \"Input text\", \"rows\", \"4\", \"cols\", \"5\", \"formControlName\", \"description\"], [\"id\", \"descriptionErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [1, \"container\"], [1, \"column\", \"column_left\"], [1, \"course__flex\"], [\"type\", \"number\", \"id\", \"duration\", \"name\", \"duration\", \"placeholder\", \"Input duration\", \"formControlName\", \"duration\"], [1, \"course__duration\"], [\"id\", \"durationErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"text\", \"id\", \"author\", \"name\", \"author\", \"placeholder\", \"Input Author Name\", \"formControlName\", \"author\"], [\"id\", \"createAuthor\", \"buttonText\", \"Create Author\", 3, \"click\"], [\"id\", \"authorErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [1, \"course__authors\"], [\"class\", \"course__authors\", 4, \"ngIf\"], [1, \"column\", \"column_right\"], [1, \"form__action\"], [\"buttonText\", \"Cancel\", \"routerLink\", \"courses\"], [\"type\", \"submit\", \"type\", \"submit\", 3, \"buttonText\", \"disabled\"], [3, \"showModal\", \"title\", \"message\", \"close\"], [\"id\", \"titleErrorMessage\", 1, \"text-danger\"], [\"id\", \"descriptionErrorMessage\", 1, \"text-danger\"], [\"id\", \"durationErrorMessage\", 1, \"text-danger\"], [\"id\", \"authorErrorMessage\", 1, \"text-danger\"], [\"class\", \"authors_list\", 4, \"ngFor\", \"ngForOf\"], [1, \"authors_list\"], [\"iconName\", \"plus\", 3, \"click\"], [\"iconName\", \"trash\", 3, \"click\"]],\n  template: function CourseFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Create / Edit Course\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function CourseFormComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.onFormSubmit();\n      });\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"h3\");\n      i0.ɵɵtext(6, \"Main Info\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 3);\n      i0.ɵɵelement(8, \"input\", 4);\n      i0.ɵɵtemplate(9, CourseFormComponent_span_9_Template, 2, 0, \"span\", 5);\n      i0.ɵɵtemplate(10, CourseFormComponent_span_10_Template, 2, 0, \"span\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 3)(12, \"label\", 6);\n      i0.ɵɵtext(13, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"textarea\", 7);\n      i0.ɵɵtemplate(15, CourseFormComponent_span_15_Template, 2, 0, \"span\", 8);\n      i0.ɵɵtemplate(16, CourseFormComponent_span_16_Template, 2, 0, \"span\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 9)(18, \"div\", 10)(19, \"h3\");\n      i0.ɵɵtext(20, \"Duration\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 3)(22, \"div\", 11);\n      i0.ɵɵelement(23, \"input\", 12);\n      i0.ɵɵelementStart(24, \"div\", 13);\n      i0.ɵɵtext(25);\n      i0.ɵɵpipe(26, \"duration\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(27, CourseFormComponent_span_27_Template, 2, 0, \"span\", 14);\n      i0.ɵɵtemplate(28, CourseFormComponent_span_28_Template, 2, 0, \"span\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"h3\");\n      i0.ɵɵtext(30, \"Authors\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 3)(32, \"div\", 11);\n      i0.ɵɵelement(33, \"input\", 15);\n      i0.ɵɵelementStart(34, \"app-button\", 16);\n      i0.ɵɵlistener(\"click\", function CourseFormComponent_Template_app_button_click_34_listener() {\n        return ctx.createAuthor();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(35, CourseFormComponent_span_35_Template, 2, 0, \"span\", 17);\n      i0.ɵɵelementStart(36, \"div\", 18)(37, \"h3\");\n      i0.ɵɵtext(38, \"Authors list\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(39, CourseFormComponent_div_39_Template, 2, 1, \"div\", 19);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(40, \"div\", 20)(41, \"h3\");\n      i0.ɵɵtext(42, \"Course Authors\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"p\");\n      i0.ɵɵtext(44, \"Author list is empty\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(45, \"div\", 21);\n      i0.ɵɵelement(46, \"app-button\", 22)(47, \"app-button\", 23);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(48, \"app-modal\", 24);\n      i0.ɵɵlistener(\"close\", function CourseFormComponent_Template_app_modal_close_48_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      let tmp_5_0;\n      let tmp_6_0;\n      let tmp_7_0;\n      let tmp_8_0;\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.courseForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"required\"]) && (((tmp_1_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_1_0.dirty) || ((tmp_1_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_1_0.touched)));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"minlength\"]) && (((tmp_2_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_2_0.dirty) || ((tmp_2_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_2_0.touched)));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_3_0.errors == null ? null : tmp_3_0.errors[\"required\"]) && (((tmp_3_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_3_0.dirty) || ((tmp_3_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_3_0.touched)));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_4_0.errors == null ? null : tmp_4_0.errors[\"minlength\"]) && (((tmp_4_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_4_0.dirty) || ((tmp_4_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_4_0.touched)));\n      i0.ɵɵadvance(9);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(26, 15, (tmp_5_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_5_0.value), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_6_0.errors == null ? null : tmp_6_0.errors[\"required\"]) && (((tmp_6_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_6_0.dirty) || ((tmp_6_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_6_0.touched)));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_7_0.errors == null ? null : tmp_7_0.errors[\"min\"]) && (((tmp_7_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_7_0.dirty) || ((tmp_7_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_7_0.touched)));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx.courseForm.get(\"author\")) == null ? null : tmp_8_0.errors == null ? null : tmp_8_0.errors[\"minlength\"]) && (((tmp_8_0 = ctx.courseForm.get(\"author\")) == null ? null : tmp_8_0.dirty) || ((tmp_8_0 = ctx.courseForm.get(\"author\")) == null ? null : tmp_8_0.touched)));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.authors.length > 0);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"buttonText\", ctx.courseId ? \"Edit Course\" : \"Create Course\")(\"disabled\", ctx.courseForm.invalid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"showModal\", ctx.showModal)(\"title\", ctx.modalTitle)(\"message\", ctx.modalMessage);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.ButtonComponent, i7.ModalComponent, i8.DurationPipe],\n  styles: [\".app-plate[_ngcontent-%COMP%] {\\n  width: 100%;\\n  min-height: 477px;\\n  background-color: #fff;\\n  border: 1px solid #CFCFCF;\\n  border-radius: 4px;\\n  padding: 32px;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.text-align-center[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n.app-error-text[_ngcontent-%COMP%] {\\n  color: #FF0000;\\n  position: absolute;\\n  margin-top: 4px;\\n}\\n\\n.form__control[_ngcontent-%COMP%] {\\n  margin-bottom: 24px;\\n}\\n.form__action[_ngcontent-%COMP%] {\\n  margin-top: 54px;\\n}\\n.form__text[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-top: 38px;\\n  flex-wrap: wrap;\\n}\\n\\n.separator[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-bottom: 1px solid #CFCFCF;\\n}\\n\\n.text-danger[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n.course[_ngcontent-%COMP%] {\\n  min-width: 60vw;\\n}\\n.course__flex[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: baseline;\\n}\\n.course__flex[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  flex: 1;\\n}\\n.course__flex[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%] {\\n  margin-left: 16px;\\n}\\n.course__flex[_ngcontent-%COMP%]   .course__duration[_ngcontent-%COMP%] {\\n  margin-left: 16px;\\n}\\n.course__authors[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n  display: flex;\\n}\\n.course__authors-item[_ngcontent-%COMP%] {\\n  margin-right: 10px;\\n}\\n.course__icon[_ngcontent-%COMP%] {\\n  margin-left: 4px;\\n  cursor: pointer;\\n}\\n\\n.form__action[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 10px;\\n  float: right;\\n}\\n\\n.authors_list[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 5px;\\n}\\n\\n.course__authors[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.container[_ngcontent-%COMP%]   .column_left[_ngcontent-%COMP%] {\\n  flex: 2;\\n}\\n.container[_ngcontent-%COMP%]   .column_left[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  max-width: 400px;\\n  padding: 8px;\\n  margin-bottom: 10px;\\n  margin-right: 0px;\\n}\\n.container[_ngcontent-%COMP%]   .column_right[_ngcontent-%COMP%] {\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL3N0eWxlcy9zdHlsZXMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvY291cnNlLWZvcm0vY291cnNlLWZvcm0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUE7RUFDSSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxzQkFQVTtFQVFWLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FDSEo7O0FETUE7RUFDSSxrQkFBQTtBQ0hKOztBRE1BO0VBQ0ksY0FsQlE7RUFtQlIsa0JBQUE7RUFDQSxlQUFBO0FDSEo7O0FET0k7RUFDSSxtQkFBQTtBQ0pSO0FET0k7RUFDSSxnQkFBQTtBQ0xSO0FEUUk7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0YsZUFBQTtBQ05OOztBRFVBO0VBQ0ksV0FBQTtFQUNBLGdDQUFBO0FDUEo7O0FEVUE7RUFDSSxVQUFBO0FDUEo7O0FBdkNBO0VBQ0MsZUFBQTtBQTBDRDtBQXpDRTtFQUNFLGFBQUE7RUFDQSw4QkFBQTtFQUNBLHFCQUFBO0FBMkNKO0FBMUNJO0VBQ0UsT0FBQTtBQTRDTjtBQTFDSTtFQUNFLGlCQUFBO0FBNENOO0FBMUNJO0VBQ0UsaUJBQUE7QUE0Q047QUF6Q0U7RUFDRSxlQUFBO0VBQ0EsYUFBQTtBQTJDSjtBQTFDSTtFQUNFLGtCQUFBO0FBNENOO0FBekNFO0VBQ0UsZ0JBQUE7RUFDQSxlQUFBO0FBMkNKOztBQXZDQTtFQUNFLGFBQUE7RUFDQSxTQUFBO0VBQ0EsWUFBQTtBQTBDRjs7QUF4Q0E7RUFDRSxhQUFBO0VBQ0EsUUFBQTtBQTJDRjs7QUF6Q0E7RUFDRSxjQUFBO0FBNENGOztBQTFDQTtFQUNFLGFBQUE7QUE2Q0Y7QUEzQ0k7RUFDRSxPQUFBO0FBNkNOO0FBNUNNO0VBQ0UsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtBQThDUjtBQTNDSTtFQUNFLE9BQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBNkNOIiwic291cmNlc0NvbnRlbnQiOlsiJGNvbG9yLXdoaXRlOiAjZmZmO1xyXG4kY29sb3ItZ3JheTogI0NGQ0ZDRjtcclxuJGNvbG9yLXJlZDogI0ZGMDAwMDtcclxuXHJcbi5hcHAtcGxhdGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtaW4taGVpZ2h0OiA0NzdweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICRjb2xvci13aGl0ZTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICRjb2xvci1ncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgcGFkZGluZzogMzJweDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufVxyXG5cclxuLnRleHQtYWxpZ24tY2VudGVyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLmFwcC1lcnJvci10ZXh0IHtcclxuICAgIGNvbG9yOiAkY29sb3ItcmVkO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogNHB4O1xyXG59XHJcblxyXG4uZm9ybSB7XHJcbiAgICAmX19jb250cm9sIHtcclxuICAgICAgICBtYXJnaW4tYm90dG9tOiAyNHB4O1xyXG4gICAgfVxyXG5cclxuICAgICZfX2FjdGlvbiB7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogNTRweDtcclxuICAgIH1cclxuXHJcbiAgICAmX190ZXh0IHtcclxuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogMzhweDtcclxuICAgICAgZmxleC13cmFwOiB3cmFwO1xyXG4gICAgfVxyXG59XHJcblxyXG4uc2VwYXJhdG9yIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICRjb2xvci1ncmF5O1xyXG59XHJcblxyXG4udGV4dC1kYW5nZXIge1xyXG4gICAgY29sb3I6IHJlZDtcclxufVxyXG4iLCJAaW1wb3J0ICdzcmMvYXBwL3NoYXJlZC9zdHlsZXMvc3R5bGVzJztcclxuLmNvdXJzZSB7XHJcbiBtaW4td2lkdGg6IDYwdnc7XHJcbiAgJl9fZmxleCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xyXG4gICAgJiBpbnB1dCB7XHJcbiAgICAgIGZsZXg6IDE7XHJcbiAgICB9XHJcbiAgICAmIGFwcC1idXR0b24ge1xyXG4gICAgICBtYXJnaW4tbGVmdDogMTZweDtcclxuICAgIH1cclxuICAgICYgLmNvdXJzZV9fZHVyYXRpb24ge1xyXG4gICAgICBtYXJnaW4tbGVmdDogMTZweDtcclxuICAgIH1cclxuICB9XHJcbiAgJl9fYXV0aG9ycyB7XHJcbiAgICBtYXJnaW4tdG9wOiA4cHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgJi1pdGVtIHtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG4gICAgfVxyXG4gIH1cclxuICAmX19pY29uIHtcclxuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgfVxyXG59XHJcblxyXG4uZm9ybV9fYWN0aW9uIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMTBweDtcclxuICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuLmF1dGhvcnNfbGlzdHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogNXB4O1xyXG59XHJcbi5jb3Vyc2VfX2F1dGhvcnMge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi5jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgLmNvbHVtbiB7XHJcbiAgICAmX2xlZnQge1xyXG4gICAgICBmbGV4OiAyO1xyXG4gICAgICBpbnB1dCB7XHJcbiAgICAgICAgbWF4LXdpZHRoOiA0MDBweDtcclxuICAgICAgICBwYWRkaW5nOiA4cHg7XHJcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDBweDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgJl9yaWdodCB7XHJcbiAgICAgIGZsZXg6IDE7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","fas","i0","CourseFormComponent","constructor","fb","library","router","activatedRoute","coursesStoreService","addIconPacks","courseForm","group","title","control","required","minLength","description","author","pattern","authors","array","courseAuthors","duration","min","ngOnInit","courseId","snapshot","paramMap","get","getCourse","selectedCourse$","subscribe","course","populateForm","patchValue","setAuthors","authorFormGroups","map","createAuthorFbGroup","authorFormArray","setControl","onFormSubmit","valid","editCourse","createCourseFromForm","createCourse","reset","clear","navigate","updateModal","markAllAsTouched","courseFormValue","value","getAuthorsIds","ids","push","id","addAuthorToCourseAuthors","controls","at","createAuthor","next","deleteAuthor","error","console","name","removeAt","deleteCourseAuthor","newAuthor","length","authorFormGroup","nextId","modalTitle","modalMessage","showModal","closeModal","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Prog\\EPAM2\\Angular1\\angular-fundamentals-template\\src\\app\\shared\\components\\course-form\\course-form.component.ts","C:\\Prog\\EPAM2\\Angular1\\angular-fundamentals-template\\src\\app\\shared\\components\\course-form\\course-form.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport {\r\n  FormBuilder, FormGroup, FormArray, Validators\r\n} from '@angular/forms';\r\nimport { FaIconLibrary } from '@fortawesome/angular-fontawesome';\r\nimport { fas } from '@fortawesome/free-solid-svg-icons';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { CoursesStoreService } from \"@app/services/courses-store.service\";\r\nimport { Author, Course, CourseDTO } from \"@app/services/course-info\";\r\n\r\n@Component({\r\n  selector: 'app-course-form',\r\n  templateUrl: './course-form.component.html',\r\n  styleUrls: ['./course-form.component.scss'],\r\n})\r\nexport class CourseFormComponent {\r\n  courseForm!: FormGroup;\r\n  courseId: string | null = null;\r\n  nextId = 1; // Initialize ID counter\r\n  showModal = false;\r\n  modalTitle = \"\";\r\n  modalMessage = \"\";\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private library: FaIconLibrary,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private coursesStoreService: CoursesStoreService\r\n  ) {\r\n    library.addIconPacks(fas);\r\n    this.courseForm = this.fb.group({\r\n      title: this.fb.control(\"\", [\r\n        Validators.required,\r\n        Validators.minLength(2),\r\n      ]),\r\n      description: this.fb.control(\"\", [\r\n        Validators.required,\r\n        Validators.minLength(2),\r\n      ]),\r\n      author: this.fb.control(\"\", [\r\n        Validators.minLength(2),\r\n        Validators.pattern(\"[a-zA-Z0-9]*\"),\r\n      ]),\r\n      authors: this.fb.array([]),\r\n      courseAuthors: this.fb.array([]),\r\n      duration: this.fb.control(0, [Validators.required, Validators.min(1)]),\r\n    });\r\n  }\r\n  ngOnInit() {\r\n    this.courseId = this.activatedRoute.snapshot.paramMap.get(\"id\");\r\n    if (this.courseId) {\r\n      this.coursesStoreService.getCourse(this.courseId);\r\n      this.coursesStoreService.selectedCourse$.subscribe((course) => {\r\n        if (course) {\r\n          this.populateForm(course);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  populateForm(course: CourseDTO) {\r\n    this.courseForm.patchValue({\r\n      title: course.title,\r\n      description: course.description,\r\n      duration: course.duration,\r\n    });\r\n    this.setAuthors(course.authors);\r\n  }\r\n  setAuthors(authors: Author[] | undefined) {\r\n    if (authors) {\r\n      const authorFormGroups = authors.map((author) =>\r\n        this.createAuthorFbGroup(author)\r\n      );\r\n      const authorFormArray = this.fb.array(authorFormGroups);\r\n      this.courseForm.setControl(\"courseAuthors\", authorFormArray);\r\n    }\r\n  }\r\n  onFormSubmit() {\r\n    if (this.courseForm.valid) {\r\n      if (this.courseId) {\r\n        this.coursesStoreService.editCourse(\r\n          this.courseId,\r\n          this.createCourseFromForm()\r\n        );\r\n      } else {\r\n        this.coursesStoreService.createCourse(this.createCourseFromForm());\r\n      }\r\n      this.courseForm.reset();\r\n      this.courseAuthors.clear();\r\n      this.router.navigate([\"/courses\"]);\r\n    } else {\r\n      this.updateModal(\"Invalid form\", \"Form is not valid\");\r\n      this.courseForm.markAllAsTouched();\r\n    }\r\n  }\r\n\r\n  createCourseFromForm(): Course {\r\n    let courseFormValue = this.courseForm.value;\r\n    return {\r\n      title: courseFormValue[\"title\"],\r\n      description: courseFormValue[\"description\"],\r\n      duration: courseFormValue[\"duration\"],\r\n      authors: this.getAuthorsIds(),\r\n    };\r\n  }\r\n\r\n  getAuthorsIds(): string[] {\r\n    let ids: string[] = [];\r\n    this.courseAuthors.value.map((author: Author) => ids.push(author.id!));\r\n    return ids;\r\n  }\r\n\r\n  addAuthorToCourseAuthors(id: number) {\r\n    let author = this.authors.controls.at(id);\r\n    this.coursesStoreService\r\n      .createAuthor(author?.get(\"name\")?.value)\r\n      .subscribe({\r\n        next: (author) => {\r\n          this.courseAuthors.push(this.createAuthorFbGroup(author));\r\n          this.deleteAuthor(id);\r\n        },\r\n        error: (error) => {\r\n          console.error(\"Failed to create author:\", error);\r\n        },\r\n      });\r\n  }\r\n\r\n  createAuthorFbGroup(author: Author) {\r\n    return this.fb.group({\r\n      id: [author.id, Validators.required],\r\n      name: [author.name, Validators.required],\r\n    });\r\n  }\r\n  deleteAuthor(id: number) {\r\n    this.authors.removeAt(id);\r\n  }\r\n  deleteCourseAuthor(id: number) {\r\n    this.courseAuthors.removeAt(id);\r\n  }\r\n\r\n  createAuthor() {\r\n    const newAuthor = this.courseForm.get(\"author\");\r\n    if (newAuthor?.valid && newAuthor.value.length >= 2) {\r\n      const authorFormGroup = this.fb.group({\r\n        id: this.nextId++,\r\n        name: newAuthor.value,\r\n      });\r\n      this.authors.push(authorFormGroup);\r\n      newAuthor.reset();\r\n    }\r\n  }\r\n\r\n  get courseAuthors(): FormArray {\r\n    return this.courseForm.get(\"courseAuthors\") as FormArray;\r\n  }\r\n  get authors(): FormArray {\r\n    return this.courseForm.get(\"authors\") as FormArray;\r\n  }\r\n\r\n  updateModal(modalTitle: string, modalMessage: string) {\r\n    this.modalMessage = modalTitle;\r\n    this.modalTitle = modalMessage;\r\n    this.showModal = true;\r\n  }\r\n  closeModal() {\r\n    this.showModal = false;\r\n  }\r\n}","<!-- Replace ::text:: with your code -->\r\n<h2>Create / Edit Course</h2>\r\n<form [formGroup]=\"courseForm\" (ngSubmit)=\"onFormSubmit()\">\r\n  <div class=\"app-plate\">\r\n    <div class=\"course\">\r\n      <h3>Main Info</h3>\r\n      <div class=\"form__control\">\r\n        <input type=\"text\" id=\"title\" name=\"title\" placeholder=\"Input text\" formControlName=\"title\"/>\r\n        <span id=\"titleErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('title')?.errors?.['required'] && (courseForm.get('title')?.dirty || courseForm.get('title')?.touched)\">\r\n          This field is required\r\n        </span>\r\n        <span id=\"titleErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('title')?.errors?.['minlength'] && (courseForm.get('title')?.dirty || courseForm.get('title')?.touched)\">\r\n          Title must be at least 2 characters\r\n        </span>\r\n      </div>\r\n      <div class=\"form__control\">\r\n        <label for=\"description\">Description</label>\r\n        <textarea\r\n          id=\"description\"\r\n          name=\"description\"\r\n          placeholder=\"Input text\"\r\n          rows=\"4\"\r\n          cols=\"5\"\r\n          formControlName=\"description\"\r\n        ></textarea>\r\n        <span id=\"descriptionErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('description')?.errors?.['required'] && (courseForm.get('description')?.dirty || courseForm.get('description')?.touched)\">\r\n          This field is required\r\n        </span>\r\n        <span id=\"descriptionErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('description')?.errors?.['minlength'] && (courseForm.get('description')?.dirty || courseForm.get('description')?.touched)\">\r\n          Description must be at least 2 characters\r\n        </span>\r\n      </div>\r\n      <div class=\"container\">\r\n        <div class=\"column column_left\">\r\n          <h3>Duration</h3>\r\n          <div class=\"form__control\">\r\n            <div class=\"course__flex\">\r\n              <!--Use the name `duration` for the form array.-->\r\n              <input type=\"number\" id=\"duration\" name=\"duration\" placeholder=\"Input duration\" formControlName=\"duration\"/>\r\n              <div class=\"course__duration\">\r\n                {{ courseForm.get('duration')?.value | duration}}\r\n              </div>\r\n            </div>\r\n            <span id=\"durationErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('duration')?.errors?.['required'] && (courseForm.get('duration')?.dirty || courseForm.get('duration')?.touched)\">\r\n              This field field is required\r\n            </span>   \r\n            <span id=\"durationErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('duration')?.errors?.['min'] && (courseForm.get('duration')?.dirty || courseForm.get('duration')?.touched)\">\r\n              Duration must be positive\r\n            </span>      \r\n          </div>\r\n          <h3>Authors</h3>\r\n          <div class=\"form__control\">\r\n            <div class=\"course__flex\">\r\n              <input type=\"text\" id=\"author\" name=\"author\" placeholder=\"Input Author Name\" formControlName=\"author\"/>\r\n              <app-button id=\"createAuthor\" buttonText=\"Create Author\" (click)=\"createAuthor()\"  ></app-button>\r\n            </div>\r\n            <span id=\"authorErrorMessage\" class=\"text-danger\" *ngIf=\"courseForm.get('author')?.errors?.['minlength'] && (courseForm.get('author')?.dirty || courseForm.get('author')?.touched)\">\r\n              Author must be at least 2 characters\r\n            </span>   \r\n            <div class=\"course__authors\">\r\n              <h3>Authors list</h3>\r\n              <div class=\"course__authors\" *ngIf=\"authors.length > 0\">\r\n                <div *ngFor=\"let author of authors.controls; let i = index\" class=\"authors_list\">\r\n                  {{ author.get('name')?.value }}\r\n                  <app-button iconName=\"plus\" (click)=\"addAuthorToCourseAuthors(i)\"></app-button>\r\n                  <app-button iconName=\"trash\" (click)=\"deleteAuthor(i)\"></app-button>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"column column_right\">\r\n          <h3>Course Authors</h3>\r\n          <p>Author list is empty</p>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form__action\">\r\n      <app-button buttonText=\"Cancel\" routerLink=\"courses\"></app-button>\r\n      <app-button type=\"submit\" [buttonText]=\"courseId ? 'Edit Course' : 'Create Course'\" type=\"submit\"\r\n        [disabled]=\"courseForm.invalid\"></app-button>\r\n    </div>\r\n</form>\r\n<app-modal [showModal]=\"showModal\" [title]=\"modalTitle\" [message]=\"modalMessage\" (close)=\"closeModal()\"></app-modal>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}