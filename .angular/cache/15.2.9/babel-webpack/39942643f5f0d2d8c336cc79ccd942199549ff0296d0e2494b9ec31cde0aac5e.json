{"ast":null,"code":"import { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./auth/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./user/services/user-store.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"./shared/components/header/header.component\";\nimport * as i6 from \"./shared/components/button/button.component\";\nfunction AppComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r0.name$));\n  }\n}\nconst _c0 = function () {\n  return [\"login\"];\n};\nfunction AppComponent_app_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-button\", 4);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction AppComponent_app_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-button\", 5);\n    i0.ɵɵlistener(\"click\", function AppComponent_app_button_3_Template_app_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.logout());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nexport class AppComponent {\n  constructor(authService, router, userStoreService) {\n    this.authService = authService;\n    this.router = router;\n    this.userStoreService = userStoreService;\n    this.unsubscribe$ = new Subject();\n    this.title = 'courses-app';\n    this.isLoggedIn = false;\n    this.name$ = this.userStoreService.name$;\n    this.isAdmin$ = this.userStoreService.isAdmin$;\n  }\n  ngOnInit() {\n    this.authService.isAuthorized$.pipe(takeUntil(this.unsubscribe$)).subscribe(isAuth => {\n      this.isLoggedIn = isAuth;\n      this.userStoreService.getUser();\n    });\n  }\n  logout() {\n    this.authService.logout();\n    this.userStoreService.logout();\n    this.router.navigate([\"\"]);\n  }\n  ngOnDestroy() {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserStoreService));\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 6,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [\"buttonText\", \"Login\", \"routerLinkActive\", \"router-link-active\", 3, \"routerLink\", 4, \"ngIf\"], [\"buttonText\", \"Logout\", 3, \"click\", 4, \"ngIf\"], [1, \"app-root\"], [\"buttonText\", \"Login\", \"routerLinkActive\", \"router-link-active\", 3, \"routerLink\"], [\"buttonText\", \"Logout\", 3, \"click\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-header\");\n      i0.ɵɵtemplate(1, AppComponent_span_1_Template, 3, 3, \"span\", 0);\n      i0.ɵɵtemplate(2, AppComponent_app_button_2_Template, 1, 2, \"app-button\", 1);\n      i0.ɵɵtemplate(3, AppComponent_app_button_3_Template, 1, 0, \"app-button\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵelement(5, \"router-outlet\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n    }\n  },\n  dependencies: [i4.NgIf, i5.HeaderComponent, i6.ButtonComponent, i2.RouterOutlet, i2.RouterLink, i2.RouterLinkActive, i4.AsyncPipe],\n  styles: [\".app-root[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 24px;\\n}\\n\\n.userName[_ngcontent-%COMP%] {\\n  font-family: \\\"Open Sans\\\", sans-serif;\\n  font-size: 14px;\\n  gap: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxhQUFBO0FBQ0Y7O0FBRUE7RUFDRSxvQ0FBQTtFQUNBLGVBQUE7RUFDQSxRQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuYXBwLXJvb3Qge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDI0cHg7XHJcbn1cclxuXHJcbi51c2VyTmFtZSB7XHJcbiAgZm9udC1mYW1pbHk6IFwiT3BlbiBTYW5zXCIsIHNhbnMtc2VyaWY7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGdhcDogOHB4O1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAIA,SAASA,OAAO,EAAEC,SAAS,QAAQ,MAAM;;;;;;;;;;ICHvCC,4BAAyB;IAAAA,YAAiB;;IAAAA,iBAAO;;;;IAAxBA,eAAiB;IAAjBA,wDAAiB;;;;;;;;IAC1CA,gCACqD;;;IADFA,uDAAwB;;;;;;IAE3EA,qCAAsE;IAAnBA;MAAAA;MAAA;MAAA,OAASA,8BAAQ;IAAA,EAAC;IAACA,iBAAa;;;ADQrF,OAAM,MAAOC,YAAY;EAQvBC,YACUC,WAAwB,EACxBC,MAAc,EACdC,gBAAkC;IAFlC,gBAAW,GAAXF,WAAW;IACX,WAAM,GAANC,MAAM;IACN,qBAAgB,GAAhBC,gBAAgB;IAVlB,iBAAY,GAAG,IAAIP,OAAO,EAAQ;IAE1C,UAAK,GAAG,aAAa;IACrB,eAAU,GAAG,KAAK;IAClB,UAAK,GAAG,IAAI,CAACO,gBAAgB,CAACC,KAAK;IACnC,aAAQ,GAAG,IAAI,CAACD,gBAAgB,CAACE,QAAQ;EAMtC;EAEHC,QAAQ;IACN,IAAI,CAACL,WAAW,CAACM,aAAa,CAC3BC,IAAI,CAACX,SAAS,CAAC,IAAI,CAACY,YAAY,CAAC,CAAC,CAClCC,SAAS,CAACC,MAAM,IAAG;MAClB,IAAI,CAACC,UAAU,GAAGD,MAAM;MACxB,IAAI,CAACR,gBAAgB,CAACU,OAAO,EAAE;IACjC,CAAC,CAAC;EACN;EAEAC,MAAM;IACJ,IAAI,CAACb,WAAW,CAACa,MAAM,EAAE;IACzB,IAAI,CAACX,gBAAgB,CAACW,MAAM,EAAE;IAC9B,IAAI,CAACZ,MAAM,CAACa,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EAC5B;EAEAC,WAAW;IACT,IAAI,CAACP,YAAY,CAACQ,IAAI,EAAE;IACxB,IAAI,CAACR,YAAY,CAACS,QAAQ,EAAE;EAC9B;;AAhCWnB,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;QAAZA,YAAY;EAAAoB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZzBzB,kCAAY;MACVA,+DAAiD;MACjDA,2EACqD;MACrDA,2EAAmF;MACrFA,iBAAa;MACbA,8BAAsB;MACpBA,gCAA+B;MADjCA,iBAAsB;;;MALbA,eAAgB;MAAhBA,qCAAgB;MACVA,eAAiB;MAAjBA,sCAAiB;MAEjBA,eAAgB;MAAhBA,qCAAgB","names":["Subject","takeUntil","i0","AppComponent","constructor","authService","router","userStoreService","name$","isAdmin$","ngOnInit","isAuthorized$","pipe","unsubscribe$","subscribe","isAuth","isLoggedIn","getUser","logout","navigate","ngOnDestroy","next","complete","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Prog\\EPAM2\\Angular1\\angular-fundamentals-template\\src\\app\\app.component.ts","C:\\Prog\\EPAM2\\Angular1\\angular-fundamentals-template\\src\\app\\app.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { AuthService } from './auth/services/auth.service';\r\nimport { Router } from '@angular/router';\r\nimport { UserStoreService } from './user/services/user-store.service';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { CoursesStoreService } from './services/courses-store.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit, OnDestroy {\r\n  private unsubscribe$ = new Subject<void>();\r\n\r\n  title = 'courses-app';\r\n  isLoggedIn = false;\r\n  name$ = this.userStoreService.name$;\r\n  isAdmin$ = this.userStoreService.isAdmin$;\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private userStoreService: UserStoreService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.authService.isAuthorized$\r\n      .pipe(takeUntil(this.unsubscribe$))\r\n      .subscribe(isAuth => {\r\n        this.isLoggedIn = isAuth;\r\n        this.userStoreService.getUser();\r\n      });\r\n  }\r\n\r\n  logout() {\r\n    this.authService.logout();\r\n    this.userStoreService.logout();\r\n    this.router.navigate([\"\"]);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.unsubscribe$.next();\r\n    this.unsubscribe$.complete();\r\n  }\r\n}","<app-header>\r\n  <span *ngIf=\"isLoggedIn\">{{name$ | async}}</span>\r\n  <app-button *ngIf=\"!isLoggedIn\" buttonText=\"Login\" [routerLink]=\"['login']\"\r\n    routerLinkActive=\"router-link-active\"></app-button>\r\n  <app-button *ngIf=\"isLoggedIn\" buttonText=\"Logout\" (click)=\"logout()\"></app-button>\r\n</app-header>\r\n<div class=\"app-root\">\r\n  <router-outlet></router-outlet>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}